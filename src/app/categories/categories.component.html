<div class="container page-container">
  <header class="page-header">
    <h1>Shop by Category</h1>
    <p>Find the best products organized for you.</p>
  </header>

  <div class="loading-spinner" *ngIf="isLoading">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Loading categories...</p>
  </div>

  <div *ngIf="!isLoading">
    <section class="category-section" *ngFor="let categoryName of categoryOrder">
      
      <ng-container *ngIf="categorizedProducts[categoryName] && categorizedProducts[categoryName].length > 0">
        <h2 class="category-title">{{ categoryName }}</h2>
        
        <div class="products-grid">
          <div class="product-card" *ngFor="let product of categorizedProducts[categoryName]">
            <div class="product-image">
              <img [src]="product.image" [alt]="product.title" />
            </div>
            <div class="product-info">
              <h5 class="product-title">{{ product.title }}</h5>
              <div class="product-rating">
                <span class="stars">★★★★★</span> 
                <span class="rating-text">({{ product.rating.rate }})</span>
              </div>
              <div class="product-price">
                <span class="current-price">${{ product.price | number:'1.2-2' }}</span>
              </div>
              <button class="add-to-cart-btn" (click)="addToCart(product)">Add to cart</button>
            </div>
          </div>
        </div>
      </ng-container>

    </section>
  </div>
</div>